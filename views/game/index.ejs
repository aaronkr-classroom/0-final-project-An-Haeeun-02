<!-- views/transportation.ejs -->

<!-- MAIN 페이지 내용 -->
<main class="">
  <div
    id="carouselExampleCaptions"
    class="carousel slide"
    data-bs-ride="carousel"
  >
    <div class="carousel-indicators">
      <button
        type="button"
        data-bs-target="#carouselExampleCaptions"
        data-bs-slide-to="0"
        class="active"
        aria-current="true"
        aria-label="Slide 1"
      ></button>
      <button
        type="button"
        data-bs-target="#carouselExampleCaptions"
        data-bs-slide-to="1"
        aria-label="Slide 2"
      ></button>
      <button
        type="button"
        data-bs-target="#carouselExampleCaptions"
        data-bs-slide-to="2"
        aria-label="Slide 3"
      ></button>
    </div>
    <div class="carousel-inner">
      <!-- 1. Carousel Item ONE -->
      <div class="carousel-item active">
        <img
          src="https://cdn.pixabay.com/photo/2019/10/04/12/05/train-4525444_960_720.jpg"
          class="d-block w-100"
          alt="..."
        />
        <div class="carousel-caption text-start">
          <h1>Stardew Valley</h1>
          <p>Our top-class, number-one, fastest, most awesomest train.</p>
          <p>
            <a class="btn btn-lg btn-success ut-red" href="#"
              >Experience the <em>Thrill~</em></a
            >
          </p>
        </div>
      </div>

      <!-- 2. Carousel Item TWO -->
      <div class="carousel-item">
        <img
          src="https://cdn.pixabay.com/photo/2020/12/24/05/24/korea-5856548_960_720.jpg"
          class="d-block w-100"
          alt="..."
        />
        <div class="carousel-caption text-start">
          <h1>ITX</h1>
          <p>Our second fastest train. Red as flame, nearly as hot.</p>
          <p>
            <a class="btn btn-lg btn-success ut-red" href="#"
              >Experience the <em>Passion~</em></a
            >
          </p>
        </div>
      </div>

      <!-- 3. Carousel Item THREE -->
      <div class="carousel-item">
        <img
          src="https://cdn.pixabay.com/photo/2020/04/28/03/16/korea-5102455_960_720.jpg"
          class="d-block w-100"
          alt="..."
        />
        <div class="carousel-caption text-start">
          <h1>무궁화</h1>
          <p>Slightly slower, but still gets you there.</p>
          <p>
            <a class="btn btn-lg btn-success ut-red" href="#"
              >Experience the <em>Calm~</em></a
            >
          </p>
        </div>
      </div>
    </div>
  </div>
  <!--목록-->
  <div class="container col-xl-10 col-xxl-8 px-4 py-5">
    <div class="pt-5 pb-5">
      <h1>Subscribers</h1>
      <p>Here are all the subscribers to our newsletter.</p>

      <table class="table table-striped table-hover pb-5">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">이름</th>
            <th scope="col">제작자</th>
            <th scope="col">유형</th>
            <th scope="col">링크</th>
            <th scope="col">편집</th>
            <th scope="col">삭제</th>
          </tr>
        </thead>
        <tbody>
          <% games.forEach((g, i) => { %>
          <tr>
            <td><%= i+1 %></td>
            <td> <a href="/games/<%= g._id %>"><%= g.name %></td>
            <td><%= g.creater %></td>
            <td><%= g.type %></td>
            <td><a href="<%= g.link %>" target="_blank"><%= g.link %></a></td>
            <td><a class="btn btn-sm btn-outline-primary"
              role="button"
              href="/games/<%= g._id %>/edit"
              >✏️ Edit</a></td>
            <td><a class="btn btn-sm btn-outline-danger"
              role="button"
              href="/games/<%= g._id %>/delete?method=DELETE"
              onclick="return confirm('Are you sure you want to delete this record?')"
              >🗑️ Delete</a> </td> 
          </tr>
          <% }); %>
        </tbody>
      </table> 
      <div class="mt-5 mb-5 text-center">
        <a href="/games/new" class="btn btn-primary">Add New mode</a>
        <button id="restore-db" class="btn btn-secondary" onclick="runNodeFunction()">Restore DB</button>
        <script>
          function runNodeFunction() {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "C:/Users/ADMIN/Desktop/UT/Classes/2023.1-UT-NodeJS/final-project/final-project-sample/knut/data/seedSubscribers.js", true);
            xhr.onreadystatechange = function() {

              if (this.readyState === 4 && this.status === 200) {

                var response = this.responseText;
                eval(response); // Execute the response as JavaScript code
                here(); // Call the Node.js function
              }
            };
            xhr.send();
          }
        </script>
      </div>
    </div>
  </div>
</main>
